@page "/myprofile"
@using System.ComponentModel.DataAnnotations;
@using BusinessDirectory.Client.Services;
@using BusinessDirectory.DB.Models;
@inject IUser userService
@inject AuthenticationStateProvider AuthStateProvider

<PageTitle>My Profile</PageTitle>

<MudCard>
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">My Profile</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudNavLink Href="/profile" Icon="@Icons.Filled.Edit">Edit</MudNavLink>
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent> 
       @* <MudTextField @bind-Value="user.EmailAddress" Label="" Variant="Variant.Filled" Margin="Margin.Dense"></MudTextField>*@
        First Name          : @user.FirstName 
        <MudDivider/>
        Last Name           : @user.LastName
        <MudDivider/>
        Email Address       : @user.EmailAddress
        <MudDivider/>
        Mobile Number       : @user.MobileNumber
    </MudCardContent>
</MudCard>

@code {

    User user = new User();
    //List<User> users = new List<User>();
    public int UserId;

    protected override async Task OnInitializedAsync()
    {
        AuthenticationState ac = await AuthStateProvider.GetAuthenticationStateAsync();
        UserId = Int32.Parse(ac.User.Claims.First(i => i.Type == System.Security.Claims.ClaimTypes.NameIdentifier).Value);
        //users = await userService.GetUsers();
        user = await userService.GetUser(UserId);
    }
    
}